115
8, 12, 16, 18, 18, 19, 20, 21, 25, 26, 27, 31, 32, 33, 34, 38, 39, 42, 47, 48, 49, 50, 53, 53, 54, 55, 56, 58, 58, 59, 60, 61, 63, 63, 64, 65, 66, 68, 68, 69, 70, 71, 73, 73, 73, 74, 74, 74, 75, 75, 75, 76, 76, 76, 78, 78, 78, 79, 79, 79, 80, 80, 80, 81, 81, 81, 83, 83, 83, 84, 84, 84, 85, 85, 85, 86, 86, 86, 88, 88, 88, 89, 89, 89, 90, 90, 90, 91, 91, 91, 93, 93, 93, 94, 94, 94, 95, 95, 95, 96, 96, 96, 98, 98, 98, 99, 99, 99, 100, 100, 100, 101, 101, 101, 104
/*
 * gui_Channel.cpp
 *
 *  Created on: Nov 4, 2008
 *      Author: gheckler
 */

#include "gui.h"

DECLARE_APP(GUI_App)

/*----------------------------------------------------------------------------------------------*/
BEGIN_EVENT_TABLE(GUI_Health, wxFrame)
    EVT_CLOSE(GUI_Health::onClose)
END_EVENT_TABLE()
/*----------------------------------------------------------------------------------------------*/

GUI_Health::GUI_Health():iGUI_Health(NULL, wxID_ANY, wxT("Board Health"), wxDefaultPosition, wxSize(650,250), wxDEFAULT_FRAME_STYLE|wxTAB_TRAVERSAL)
{


}

GUI_Health::~GUI_Health()
{


}

void GUI_Health::onClose(wxCloseEvent& evt)
{
	wxCommandEvent cevt;
	evt.Veto();
	pToplevel->onHealth(cevt);
}

void GUI_Health::paintNow()
{

    wxClientDC dc(this);
    render(dc);

}


void GUI_Health::render(wxDC& dc)
{

	wxString str;
	Board_Health_M *pHealth = &p->board_health;


	str.Printf(wxT("%02d.%02d.%02d"),(pHealth->trk_version >> 24) & 0xff,
									(pHealth->trk_version >> 16) & 0xff,
									(pHealth->trk_version >> 8) & 0xff);
	trkv->SetLabel(str);

	str.Printf(wxT("%02d.%02d.%02d"),(pHealth->acq_version >> 24) & 0xff,
									(pHealth->acq_version >> 16) & 0xff,
									(pHealth->acq_version >> 8) & 0xff);
	acqv->SetLabel(str);

	str.Printf(wxT("%02d.%02d.%02d"),(pHealth->fft_version >> 24) & 0xff,
									(pHealth->fft_version >> 16) & 0xff,
									(pHealth->fft_version >> 8) & 0xff);
	fftv->SetLabel(str);

	str.Printf(wxT("%02d.%02d.%02x"),(pHealth->sft_version >> 16) & 0xff,
									(pHealth->sft_version >> 8) & 0xff,
									(pHealth->sft_version >> 0) & 0xff);
	sftv->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->dsa0);			dsa0->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->dsa1);			dsa1->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->dsa2);			dsa2->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->dsa3);			dsa3->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->ovrflw0);		ovr0->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->ovrflw1);		ovr1->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->ovrflw2);		ovr2->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->ovrflw3);		ovr3->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->adc_values[8]);		nsptr->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[10]);	pcctr->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[9]);		rftr->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[1]);		vref->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->adc_values[0]);		gnd1->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[2]);		gnd2->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[3]);		p5->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[4]);		p15->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->adc_values[5]);		n15->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[6]);		p25->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[7]);		p33->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[11]);	p1p5->SetLabel(str);

	str.Printf(wxT("%15d"),pHealth->adc_values[12]);	rf0->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[13]);	rf1->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[14]);	rf2->SetLabel(str);
	str.Printf(wxT("%15d"),pHealth->adc_values[15]);	rf3->SetLabel(str);



}
